<%- include('partials/header', { title, categories, q, category, seller }) %>
<div class="container">
  <h2>My Listings</h2>
  
  <div class="card" style="margin-bottom: 20px; padding: 20px;">
    <h3>Add New Product</h3>
    <form method="POST" action="/sellers/dashboard/add" style="display: grid; gap: 10px; max-width: 500px;">
      <input name="name" placeholder="Product Name" class="login-input" required>
      <input name="price" placeholder="Price" type="number" step="0.01" class="login-input" required>
      <input name="image" placeholder="Image URL" class="login-input">
      <input name="category" placeholder="Category" class="login-input">
      <textarea name="description" placeholder="Description" rows="3" class="login-input" style="resize: vertical;"></textarea>
      <input name="stock" placeholder="Stock" type="number" class="login-input">
      <button type="submit" class="btn primary">Add Product</button>
    </form>
  </div>

  <h3>Your Products (<%= listings.length %>)</h3>
  
  <div class="product-list grid" style="gap:12px">
    <% if (!listings.length) { %>
      <div class="muted">No products listed yet. Add your first product above!</div>
    <% } %>
    <% listings.forEach(l => { %>
      <div class="card-item">
        <img src="<%= l.image || 'https://via.placeholder.com/200x150?text=No+Image' %>" alt="<%= l.name %>">
        <div>
          <div class="title"><%= l.name %></div>
          <div class="price">$<%= l.price.toFixed(2) %></div>
          <div class="meta"><%= l.category || 'Uncategorized' %></div>
          <div class="meta">Stock: <%= l.stock || 0 %></div>
          <% if (l.description) { %>
            <div class="muted" style="font-size: 0.9em; margin-top: 5px;"><%= l.description.substring(0, 100) %><%= l.description.length > 100 ? '...' : '' %></div>
          <% } %>
        </div>
        <div class="actions">
          <form method="POST" action="/sellers/dashboard/remove/<%= l._id %>" onsubmit="return confirm('Are you sure you want to remove this product?')">
            <button type="submit" class="btn" style="background: #dc3545; color: white;">Remove</button>
          </form>
        </div>
      </div>
    <% }) %>
  </div>
</div>
<%- include('partials/footer') %>